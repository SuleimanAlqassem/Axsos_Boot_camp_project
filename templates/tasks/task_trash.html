{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>ğŸ—‘ Archived Tasks</h2>

  <a href="{% url 'task_main' %}" class="btn btn-outline-secondary mb-3">â† Back to Tasks</a>
  <form method="post" action="{% url 'empty_trash' %}" onsubmit="return confirm('Delete all archived tasks permanently?');">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger mb-3">ğŸ§¹ Empty Trash</button>
  </form>

  {% for task in tasks %}
    <div class="card mb-2">
        <div class="card-body">
            <h5 class="card-title">{{ task.title }}</h5>
            <p class="card-text">{{ task.description }}</p>
            <small class="text-muted">Archived at: {{ task.updated_at|date:"Y-m-d H:i" }}</small>
            <div class="mt-2">
                <form method="post" action="{% url 'restore_task' task.id %}" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-success">â™»ï¸ Restore</button>
                </form>
                <form method="post" action="{% url 'delete_task_permanent' task.id %}" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this task permanently?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ Delete Permanently</button>
                </form>
            </div>
        </div>
  </div>
  {% empty %}
    <p>No archived tasks.</p>
  {% endfor %}
</div>
{% endblock %}